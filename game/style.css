:root{--ui-bg:#0b1220;--panel:#101827;--accent:#5df;--text:#dfe9ff}
#root, *{box-sizing:border-box;font-family:Arial,Helvetica,sans-serif}
html,body{height:100%;margin:0;background:#000}
#game{display:block;background:#000;position:absolute;left:12px;top:12px}
#ui{position:absolute;right:12px;top:12px;color:var(--text);z-index:20;width:260px;min-height:calc(100vh - 24px);padding:12px;border-radius:10px;background:linear-gradient(180deg,#111417 0%,#1b2025 100%);border:1px solid #2f3940;box-shadow:0 8px 28px rgba(0,0,0,0.7)}
button{background:#183046;color:var(--text);border:1px solid #2a3b4f;padding:6px 10px;border-radius:4px;cursor:pointer}
button:hover{background:#20455a}
h1{margin:0 0 8px 0;font-size:16px;color:var(--accent)}
.small{font-size:13px;color:#a9bbd9}

/* Right-side HUD panel */
/* HUD: metallic/silver sci-fi panel */
#hud{display:flex;gap:10px;align-items:flex-start;margin-top:8px;padding:10px;border-radius:8px;background:linear-gradient(180deg,#1b2126 0%,#2b3136 30%,#3b4146 100%);border:1px solid #6f7880;box-shadow:0 6px 18px rgba(0,0,0,0.6), inset 0 1px 0 rgba(255,255,255,0.04)}
/* right panel already styled above */

/* avatar frame: polished metal border with inner bevel */
#avatar-wrap{width:96px;height:96px;background:linear-gradient(180deg,#0b1116,#1a2026);border-radius:6px;display:flex;align-items:center;justify-content:center;overflow:hidden;flex:0 0 96px;border:2px solid #8ea1ad;box-shadow: inset 0 2px 6px rgba(255,255,255,0.03), 0 4px 10px rgba(0,0,0,0.6);position:relative}
#avatar-wrap:after{content:'';position:absolute;width:86px;height:86px;border-radius:4px;left:6px;top:6px;pointer-events:none;background:linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0));mix-blend-mode:overlay}
#avatar-img{width:auto;height:auto;max-width:92px;max-height:92px;object-fit:contain;image-rendering:pixelated}
#avatar-wrap.signal-lost{background:#050a10;border-color:#c44;box-shadow:0 0 18px rgba(255,0,0,0.25), inset 0 0 12px rgba(255,0,0,0.12)}
#avatar-wrap.signal-lost img{opacity:0}
#avatar-wrap.signal-lost:before{content:'';position:absolute;inset:0;background:
	repeating-linear-gradient(180deg,rgba(255,255,255,0.08) 0,rgba(255,255,255,0.02) 3px,transparent 6px),
	repeating-linear-gradient(90deg,rgba(0,0,0,0.12) 0,rgba(0,0,0,0.12) 2px,transparent 4px);
animation: tvNoise 0.22s steps(2) infinite;mix-blend-mode:screen;opacity:0.8}
#avatar-wrap.signal-lost:after{content:'SIGNAL LOST';position:absolute;left:6px;top:6px;right:6px;bottom:6px;display:flex;align-items:center;justify-content:center;font-size:11px;letter-spacing:2px;color:#ff7575;background:rgba(5,0,0,0.35);text-shadow:0 0 6px rgba(255,0,0,0.8);padding:0 6px;text-align:center}
@keyframes tvNoise{0%{transform:translate3d(0,0,0)}100%{transform:translate3d(-10px,6px,0)}}
/* generic avatar wrapper for enemy */
.avatar-wrap{width:96px;height:96px;background:linear-gradient(180deg,#0b1116,#1a2026);border-radius:6px;display:flex;align-items:center;justify-content:center;overflow:hidden;flex:0 0 96px;border:2px solid #8ea1ad;box-shadow: inset 0 2px 6px rgba(255,255,255,0.03), 0 4px 10px rgba(0,0,0,0.6);position:relative}
.avatar-wrap:after{content:'';position:absolute;width:86px;height:86px;border-radius:4px;left:6px;top:6px;pointer-events:none;background:linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0));mix-blend-mode:overlay}
.avatar-wrap img{width:auto;height:auto;max-width:92px;max-height:92px;object-fit:contain;image-rendering:pixelated}

/* Crew/Battery column layout */
.metric-stack{display:flex;flex-direction:column;align-items:center;gap:6px;width:60px}
.metric-label{font-size:9px;letter-spacing:0.8px;color:#7e94b5;text-transform:uppercase}
.metric-value{font-size:10px;color:#a8bedc;white-space:nowrap}
.portrait-stack{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:120px}
.crew-bar,.battery-grid{display:grid;grid-template-columns:repeat(2,12px);grid-auto-rows:12px;gap:3px;padding:4px;justify-content:center}
.crew-seg{width:12px;height:12px;background:linear-gradient(180deg,#0f6b2b,#0b5c23);border-radius:3px;border:1px solid #2a5a36;box-shadow:inset 0 -2px rgba(0,0,0,0.35)}
.crew-seg.empty{background:linear-gradient(180deg,#19221a,#0f1512);border:1px solid #262826;box-shadow:none;opacity:0.35}
.battery-grid{gap:3px}
.battery-seg{width:12px;height:12px;background:linear-gradient(180deg,#8f1b1b,#5c0d0d);border-radius:3px;border:1px solid #682121;box-shadow:inset 0 -2px rgba(0,0,0,0.4)}
.battery-seg.drained{background:linear-gradient(180deg,#2a1010,#140808);border:1px solid #211010;opacity:0.45;box-shadow:none}

/* Stack UI panels vertically in the right column */
#ui > *{display:block}
.control-bar{display:flex;gap:8px;justify-content:flex-start;margin-bottom:8px}
.control-bar button{padding:8px 10px;background:#1b2b3a;border:1px solid #2c4154;color:var(--text);border-radius:4px}
.control-bar button:hover{background:#27506a}

/* Make the right column look like Super Melee side panels */
.side-panel{background:#0b1118;border:1px solid #222;padding:8px;border-radius:4px;margin-bottom:8px}
.panel-title{font-weight:bold;color:var(--accent);font-size:13px;margin-bottom:6px;text-transform:uppercase;letter-spacing:0.8px}
.ship-display{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-bottom:8px;padding:10px;background:rgba(9,14,22,0.85);border:1px solid #1f2c3a;border-radius:10px}
.ship-focus{flex:1;display:flex;flex-direction:column;align-items:center;gap:4px;text-align:center}
.race-tag{font-size:11px;letter-spacing:1px;color:#9bb1d4;text-transform:uppercase}
.ship-preview{width:92px;height:92px;border-radius:10px;background:radial-gradient(circle at 40% 30%,rgba(120,170,255,0.25),rgba(5,10,16,0.95));display:flex;align-items:center;justify-content:center;border:1px solid #2e3e54;box-shadow:inset 0 2px 6px rgba(0,0,0,0.5)}
.ship-preview img{max-width:90%;max-height:90%;image-rendering:pixelated}
.ship-model{font-size:12px;color:#9bb1d4;letter-spacing:0.6px}
.captain-name{font-size:13px;color:var(--accent);font-weight:bold;text-transform:capitalize}
.panel-body{padding:12px;border-radius:10px;background:rgba(4,7,11,0.55);display:flex;justify-content:center}

.overlay{position:fixed;inset:0;background:rgba(3,6,12,0.9);display:flex;align-items:center;justify-content:center;z-index:40;padding:20px}
.overlay.hidden{display:none}
.overlay-card{background:#0c1624;border:1px solid #2c425e;box-shadow:0 20px 60px rgba(0,0,0,0.8);border-radius:12px;padding:24px;width:min(900px,90vw);max-height:90vh;overflow:auto;color:var(--text);text-align:center}
.overlay-card h2{margin-top:0;color:var(--accent)}
.ship-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:12px;margin-top:16px}
.ship-card{position:relative;background:#0d1624;border:1px solid #1c2532;border-radius:8px;padding:10px 8px;cursor:pointer;display:flex;flex-direction:column;align-items:center;gap:6px;color:var(--text);transition:transform 0.2s, border-color 0.2s, box-shadow 0.2s;min-height:140px;box-shadow:0 6px 16px rgba(0,0,0,0.4)}
.ship-card:hover{transform:translateY(-4px);border-color:var(--accent);box-shadow:0 10px 24px rgba(0,0,0,0.6)}
.ship-card.selected{border-color:var(--accent);box-shadow:0 0 20px rgba(93,223,255,0.5);animation:shipCardPulse 1.1s ease-in-out infinite}
.ship-card:focus-visible{outline:2px solid var(--accent);outline-offset:2px}
.ship-card-img{width:72px;height:72px;background:#04080f;border-radius:6px;display:flex;align-items:center;justify-content:center;overflow:hidden;border:1px solid #1f2c3f}
.ship-card-img img{max-width:90%;max-height:90%;image-rendering:pixelated}
.ship-card-name{font-weight:bold;font-size:12px;letter-spacing:0.6px}
.ship-card-role{font-size:10px;color:#bcd3ff;text-transform:uppercase;letter-spacing:0.8px}
.ship-card small{font-size:10px;color:#89a}
.ship-card::after{content:'';position:absolute;inset:6px;border-radius:6px;border:1px solid rgba(93,223,255,0.4);opacity:0;pointer-events:none;transition:opacity 0.2s}
.ship-card.selected::after{opacity:1}
.ship-card small strong{color:#fff}
@keyframes shipCardPulse{0%{box-shadow:0 0 12px rgba(93,223,255,0.35);}100%{box-shadow:0 0 24px rgba(93,223,255,0.8);} }
.overlay-actions{margin-top:18px;display:flex;justify-content:center}
#overlay-cancel{background:#1c2a3a}
